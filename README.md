# KWA Website

A monorepo web application for KWA built with:

- 🚀 **Frontend**: React + Vite
- 🐍 **Backend**: Django + Gunicorn + Whitenoise
- 🐬 **Database**: MySQL
- 🐳 **Containerization**: Docker + Docker Compose

---

## 📁 Project Structure

```
kwa_website/
├── backend/          # Django project
├── cms/              # React + Vite frontend (CMS)
├── db/               # MySQL dump/init.sql (optional)
├── docker-compose.yaml
```

---

## 🚀 Getting Started

### Prerequisites

- Docker + Docker Compose installed
- `.env` files with DB credentials

---

### 🔧 Setup

1. **Clone the repo**

```bash
git clone https://github.com/marketbytes-devops/kwa-website.git
cd kwa_website
```

2. **Create .env file**

Create `backend/.env` with:

```env
DB_NAME=kwa
DB_PASSWORD=supersecurepassword
DEBUG=False
SECRET_KEY=your_production_secret
```

3. **Build and run containers**

```bash
docker-compose up --build
```

---

### 🔠 Access the App

| Service     | URL                       |
| ----------- | ------------------------- |
| Frontend    | http://localhost:6701     |
| Backend API | http://localhost:6700     |
| Database    | Internal via `mysql` host |

---

## ⚙️ Common Docker Commands

```bash
# Rebuild containers
docker-compose build

# Run only the backend service
docker-compose run backend sh

# View logs
docker-compose logs -f

# Stop and clean everything
docker-compose down -v
```

---

## 📦 Deployment Notes

- Static files are served via **Whitenoise**.
- SPA routing handled by **custom Nginx config** in `cms/nginx.conf`.
- `STATIC_ROOT` and `MEDIA_ROOT` are Docker volume-mapped.
- Use a reverse proxy (e.g. Nginx, Caddy) with SSL for production hosting.

---

## 🔪 Testing

- Backend tests: `docker-compose exec backend pytest`
- Frontend linting: `docker-compose run cms npm run lint`

---

## 📝 Notes

- **Do not commit `backend/staticfiles/`** — it is generated by `collectstatic`.
- **MySQL dump file** (optional) can be placed at `db/init.sql`.

---

## 👨‍💼 Author

Built by [Albin Varghese](https://github.com/albinvar).
